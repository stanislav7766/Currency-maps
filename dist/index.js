!function(n){var t={};function e(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var a in n)e.d(r,a,function(t){return n[t]}.bind(null,a));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=13)}([function(n,t){n.exports=require("@babel/runtime/regenerator")},function(n,t){n.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(n,t){n.exports=require("axios")},function(n,t){n.exports=require("dotenv")},function(n,t){n.exports=require("moment")},function(n,t){n.exports=require("winston")},function(n,t){n.exports=require("@babel/runtime/helpers/objectSpread")},function(n,t){n.exports=require("@babel/runtime/helpers/typeof")},function(n,t){n.exports=require("html-table-to-json")},function(n,t){n.exports=require("telegraf/markup")},function(n,t){n.exports=require("winston-telegram")},function(n,t){n.exports=require("telegraf")},function(n,t){n.exports=require("urlencode")},function(n,t,e){"use strict";e.r(t);var r=e(0),a=e.n(r),o=e(1),c=e.n(o),i=e(11),u=e.n(i),s=e(9),p=e.n(s),l=e(3),f=e.n(l),k=e(6),y=e.n(k),h=e(5),d=e(10),m=e.n(d),v=e(4),g=e.n(v),b=function(){return"bot-exchange-rates-telegram"},x=function(){return"Привет 👋\n\nЯ готов помочь тебе с твоей задачей\n \nВот, что я могу сделать для тебя: \n\n👉 Выбирай валюту и необходимую задачу(продажа/покупка валюты) и я помогу найти банки с самым выгодным для тебя курсом 👌"},B=function(){return"Выбери валюту 💶, которую желаешь купить/продать 💰"},C=function(){return"Укажи,что тебя интересует продажа или покупка валюты? 🧐"},w=function(n){return"Окей, выбрана валюта - ".concat(n," 👌 🤝")},A=function(n){return"Отлично❕\n\nВыбрано - ".concat(n," валюты 😉")},E=function(n){return"Ну что же, укажи в каком городе тебя интересует ".concat(n," валюты или отправь мне свою геолокацию 🤓")},O=function(n){return"Хмм, уже выбрана валюта - ".concat(n," 🤷‍♂️ \n\nХочешь изменить на другую? 😲")},P=function(n){return"Хмм, уже выбрано действие - ".concat(n," валюты 🤷‍♂️ \n\nЖелаешь изменить свое решение? 😏")},K=function(){return"Хмм, у нас сейчас неполадки, попробуй чуть позже("},U=function(n){return"Такс, вы находитесь в ".concat(n,"?")};f.a.config();var _=h.format,I=_.combine,S=_.label,D=_.printf,M=_.colorize,T=_.timestamp,L=b(),N=g()().format("MM-DD-YY H:mm:ss"),R=D(function(n){return"[".concat(n.label,"]: ").concat(n.message," | ").concat(n.timestamp)}),q=y()({},h.config.syslog.levels,{mail:8,telegram_technical:9,telegram_sales:10});h.addColors({error:"red",warn:"yellow",info:"cyan",verbose:"blue",debug:"white",silly:"white"});h.createLogger({levels:q,transports:[new h.transports.Console({level:"info",timestamps:!0,format:I(S({label:L}),M({all:!0}),T({format:N}),R)}),new m.a({level:"telegram_technical",template:"[".concat(L,"]: {message} | ").concat(N),token:process.env.INFO_BOT_TOKEN,chatId:process.env.CHAT_ID_TECHNICAL,unique:!0}),new m.a({level:"telegram_sales",template:"[".concat(L,"]: {message} | ").concat(N),token:process.env.INFO_BOT_TOKEN,chatId:process.env.CHAT_ID_SALES,unique:!0})]});var j="share_location",Y="check_city",G="Да, указан верный город",H="Выбрать валюту",F="choosen_currency",z="Найти выгодные банки",W="choosen_buy_or_sell",J="Продажа/Покупка",V="Продажа",X="Покупка",Z="Выбрать другую валюту",$="Выбрать другое действие",Q="Выбрать другую валюту",nn="Выбрать другое действие",tn="/conversation_started",en="Вернуться назад",rn={USD:"USD",EUR:"EUR",RUB:"RUB",CHF:"CHF",GBP:"GBP",AUD:"AUD",CAD:"CAD",CZK:"CZK",DKK:"DKK",JPY:"JPY",NOK:"NOK",PLN:"PLN",SEK:"SEK",HUF:"HUF",BGL:"BGL"},an=function(){return[["Выбрать валюту"],["Продажа/Покупка"],["Найти выгодные банки"]]},on=function(){return[["USD"],["EUR"],["RUB"],["CHF"],["GBP"],["AUD"],["CAD"],["CZK"],["DKK"],["JPY"],["NOK"],["PLN"],["SEK"],["HUF"],["BGL"],["Вернуться назад"]]},cn=function(){return[["Да, указан верный город"],["Хмм, произошла ошибка, я укажу нужный город"],["Вернуться назад"]]},un=function(){return[["Продажа"],["Покупка"],["Вернуться назад"]]},sn=function(){return[["Выбрать другую валюту"],["Вернуться назад"]]},pn=function(){return[["Выбрать другое действие"],["Вернуться назад"]]},ln=function(){return[["Вернуться назад"]]};function fn(){this.events={},this.ctx={command:"",keyboard:"",papyrus:"",currency:"",action:"",latitude:"",longitude:"",city:""}}function kn(){this.nodes=[]}function yn(n,t){this.data=n,this.children=[],this.parent=t,t&&t.children.push(this)}fn.prototype.getCurrency=function(){return this.ctx.currency},fn.prototype.setCurrency=function(n){this.ctx.currency=n},fn.prototype.getLocation=function(){return{latitude:this.ctx.latitude,longitude:this.ctx.longitude}},fn.prototype.setLocation=function(n){this.ctx.latitude=n.latitude,this.ctx.longitude=n.longitude},fn.prototype.getAction=function(){return this.ctx.action},fn.prototype.setAction=function(n){this.ctx.action=n},fn.prototype.getCity=function(){return this.ctx.city},fn.prototype.setCity=function(n){this.ctx.city=n},fn.prototype.clearContext=function(){var n=this;Object.keys(this.ctx).forEach(function(t){return n.ctx[t]=""})},fn.prototype.on=function(n,t){var e=this.events[n];e?e.push(t):this.events[n]=[t]},fn.prototype.emit=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var a=this.events[n];a&&a.forEach(function(n){return n.apply(void 0,e)})},fn.prototype.setContext=function(n){this.ctx=y()({},this.getContext(),n)},fn.prototype.getContext=function(){return this.ctx},kn.prototype.insert=function(n,t){var e={};t?(e=this.nodes.find(function(n){return n.data.command===t?n:null}),this.nodes.push(new yn(n,void 0!==e&&0!==this.nodes.length?e:null))):this.nodes.push(new yn(n,null))},kn.prototype.searchContext=function(n){return this.nodes.find(function(t){return t.data.command===n?t:null})},kn.prototype.getCurrentCtx=function(n){var t=this.searchContext(n);return t?t.data:null},kn.prototype.getParentOfCurContext=function(n){var t=this.searchContext(n);return t&&t.parent?t.parent.data:null};var hn=new fn,dn=new kn;hn.on("changeContext",function(n){return hn.setContext(n)});var mn=e(7),vn=e.n(mn),gn={isEmpty:function(n){return null==n||"object"===vn()(n)&&0===Object.keys(n).length||"string"==typeof n&&0===n.trim().length||"function"==typeof n&&0===n.length||Array.isArray(n)&&0===n.length||n instanceof Error&&""===n.message},isCurrency:function(n){return Object.keys(rn).includes(n)},isBuyOrSell:function(n){return n===X||n===V}};dn.insert({command:tn,keyboard:an(),papyrus:x()}),dn.insert({command:H,keyboard:on(),papyrus:B()},tn),dn.insert({command:Z,keyboard:sn(),papyrus:function(n){return O(n)}},tn),dn.insert({command:J,keyboard:un(),papyrus:C()},tn),dn.insert({command:$,keyboard:pn(),papyrus:function(n){return P(n)}},tn),dn.insert({command:F,keyboard:ln(),papyrus:function(n){return w(n)}},tn),dn.insert({command:W,keyboard:ln(),papyrus:function(n){return A(n)}},tn),dn.insert({command:z,keyboard:[],papyrus:function(n){return E(n)}},tn),dn.insert({command:Y,keyboard:cn(),papyrus:function(n){return U(n)}},z);var bn=dn,xn=e(2),Bn=e.n(xn),Cn=e(8),wn=e.n(Cn),An={"3/4":["Bank 3/4","3/4"],"A-Bank":["A-Bank","А-Банк","А-БАНК","Aktsent-Bank","А Банк","А-банк"],Akkordbank:["akord bank","Akord Bank","Akordbank","Акордбанк"],"Alfa-Bank":["Alpha-Bank","Alfa Bank","Alfa-Bank","AlfaBank","Alʹfa-Bank"],Arcade:["Bank Arcada","Arkada","аркад"],Alliance:['At "Bank Alʹyans"',"Банк Алянс"],"ASVIO BANK":["Asvio Bank","Асвіо Банк","Асвио Банк"],"BTA Bank":["BTA BANK","БТА Банк"],"CLEARING HOUSE":["Clearing House"],"Commercial Industrial Bank":["Komertsiynyy Industrialʹnyy Bank","Komertsinyy Industrialʹnyy Bank","ComInBank"],"Credit Agricole":["Credit Agricole","Креді Агріколь","Kredi Ahrikol"],"CREDIT DNEPR":["Credit Dnepr"],"Credit Europe Bank":["Credit Europe Bank","Kredyt Europe Bank"],"CREDITWEST BANK":["Creditwest Bank"],East:["East Bank"],EVROPROMBANK:["evroprombank","Европромбанк"],Family:["family bank","Фамильный банк"],Globe:["Globe bank"],"First Investment Bank":["pinbank","ПЕРШИЙ ІНВЕСТИЦІЙНИЦ БАНК","PinBank"],Grant:["grant bank","Грант Банк"],"Idea Bank (Plus Bank)":["idea Bank","Idea Bank","Idea bank","IdeaBank"],Industrialbank:["Industrialbank","ІНДУСТРІАЛБАНК"],"International investment bank":["International Investment Bank"],Lions:["Lions Bank"],KomInvestBank:["KomInvestBank","Kominvestbank"],Kredobank:["Kredobank","KredoBank","КредоБанк","Кредобанк"],Megabank:["Megabank","Mehabank","MegaBank"],"MOTOR-BANK":["Motor Bank","МОТОР-БАНК","Мотор-банк","Мотор Банк"],"Pravex-Bank":["Pravex Bank","Praveks-Bank","Правекс Банк","ПРАВЭКС-БАНК","Pravex-Bank","Pravex-bank"],Radabank:["Radabank","РАДАБАНК","Радабанк"],"OTP Bank":["Otp Bank","Otpbank","OTP Банк","ОТП Банк","OTP Bank","Otp"],Oschadbank:["Oschadbank"],"OXY BANK":["Oksi Bank"],"Piraeus Bank ICB":["Piraeus Bank","Піреус Банк","Pireus Bank"],PIVDENNY:["Pivdennyi","ПИВДЕННЫЙ","Pivdennyy","Pivdenniy"],PrivatBank:["Privatbank","Pryvatbank","PrivatBank"],Prominvestbank:["Prominvestbank","ПРОМИНВЕСТБАНК"],"Raiffeisen Bank Aval":["Rayffayzen","Raiffeisen"],Sich:["Sich"],TASkombank:["Taskombank"],"Trust Capital":["Trast-Capital","Траст-капітал"],"Ukrainian Building and Investment Bank":["Ukrbudinvestbank","УКРАИНСКИЙ СТРОИТЕЛЬНО-ИНВЕСТИЦИОННЫЙ БАНК ПАО"],UGB:["ukrgazbank","Ukrhazbank"],"Ukrainian Capital":["Ukrainian capital"],Ukreximbank:["Ukreximbank","UkrEximBank","Ukreksimbank"],UkrSibbank:["Ukrsibbank","UkrSibBank","UkrSibbank","UKRSIBBANK","УКРСИББАНК"],"Unex Bank":["Unex Bank","Юнекс Банк","UNEX BANK"],"Universal Bank":["Universal Bank","monobank"]};e(12);f.a.config();var En=function(){var n=c()(a.a.mark(function n(t,e,r){var o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=bn.getCurrentCtx(t),hn.emit("changeContext",o),n.next=5,e(o.papyrus,r(o.keyboard));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(t,e,r){return n.apply(this,arguments)}}(),On=function(){var n=c()(a.a.mark(function n(t,e,r,o){var c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=bn.getCurrentCtx(t),hn.emit("changeContext",c),n.next=5,r(c.papyrus(e),o(c.keyboard));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(t,e,r,a){return n.apply(this,arguments)}}(),Pn=function(){var n=c()(a.a.mark(function n(t,e){var r,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=hn.getContext(),o={},!gn.isEmpty(r.command)&&r.command!==tn){n.next=7;break}En(tn,t,e),n.next=10;break;case 7:return o=bn.getParentOfCurContext(r.command),n.next=10,t(o.papyrus,e(o.keyboard));case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}},n,null,[[0,12]])}));return function(t,e){return n.apply(this,arguments)}}(),Kn=function(){var n=c()(a.a.mark(function n(t,e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{En(tn,t,e)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),Un=function(){var n=c()(a.a.mark(function n(t,e,r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{gn.isEmpty(hn.getCurrency())||gn.isEmpty(hn.getAction())?En(gn.isEmpty(hn.getCurrency())?H:J,e,r):On(t,hn.getAction(),e,r)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e,r){return n.apply(this,arguments)}}(),_n=function(){var n=c()(a.a.mark(function n(t,e,r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{!gn.isEmpty(hn.getAction())&&gn.isBuyOrSell(hn.getAction())?On($,hn.getAction(),e,r):En(t,e,r)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e,r){return n.apply(this,arguments)}}(),In=function(){var n=c()(a.a.mark(function n(t,e,r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{!gn.isEmpty(hn.getCurrency())&&gn.isCurrency(hn.getCurrency())?On(Z,hn.getCurrency(),e,r):En(t,e,r)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e,r){return n.apply(this,arguments)}}(),Sn=function(){var n=c()(a.a.mark(function n(t,e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{En(H,t,e)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),Dn=function(){var n=c()(a.a.mark(function n(t,e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{En(J,t,e)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}();function Mn(n){return n*Math.PI/180}function Tn(n,t,e,r){var a=Mn(e-n),o=Mn(r-t),c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(Mn(n))*Math.cos(Mn(e))*Math.sin(o/2)*Math.sin(o/2),i=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Number(6371e3*i)}var Ln=function(){var n=c()(a.a.mark(function n(t,e,r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{gn.isCurrency(t)&&hn.setCurrency(t),On(F,t,e,r)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e,r){return n.apply(this,arguments)}}(),Nn=function(){var n=c()(a.a.mark(function n(t,e,r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{gn.isBuyOrSell(t)&&hn.setAction(t),On(W,t,e,r)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t,e,r){return n.apply(this,arguments)}}(),Rn=function(n,t){return!gn.isEmpty(An[n])&&t.every(function(t){return An[n].every(function(n){return!new RegExp("[s\"-?!#$%^&*()'ʹw]*(".concat(n,")"),"ig").test(t.name)||!(Tn(hn.getLocation().latitude,hn.getLocation().longitude,t.geometry.location.lat,t.geometry.location.lng)<=2e4)&&(console.log(t.name,">=20000",Tn(hn.getLocation().latitude,hn.getLocation().longitude,t.geometry.location.lat,t.geometry.location.lng)),!0)})})};function qn(n,t){return jn.apply(this,arguments)}function jn(){return(jn=c()(a.a.mark(function n(t,e){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Bn.a.get("https://maps.googleapis.com/maps/api/place/textsearch/json?query=Ukraine+".concat(hn.getCity(),"&key=").concat(process.env.GOOGLE_PLACES_API_KEY));case 2:if(r=n.sent,console.log(r.data.results[0]),gn.isEmpty(r.data.results)){n.next=24;break}return console.log(t,"------------",r.data.results.map(function(n){return n.name})),n.t0=console,n.t1=Rn,n.t2=t.Bank,n.next=11,r.data.results;case 11:return n.t3=n.sent,n.t4=!(0,n.t1)(n.t2,n.t3),n.t0.log.call(n.t0,n.t4),n.t5=Rn,n.t6=t.Bank,n.next=18,r.data.results;case 18:if(n.t7=n.sent,(0,n.t5)(n.t6,n.t7)){n.next=23;break}e.push(t),n.next=24;break;case 23:console.log(t.Bank,"empty res");case 24:case"end":return n.stop()}},n)}))).apply(this,arguments)}var Yn=function(){var n=c()(a.a.mark(function n(t){var e,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=function(){return(r=c()(a.a.mark(function n(r){var o,c,i,u,s,p;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,o=!0,c=!1,i=void 0,n.prev=4,u=r[Symbol.iterator]();case 6:if(o=(s=u.next()).done){n.next=13;break}return p=s.value,n.next=10,qn(p,e);case 10:o=!0,n.next=6;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),c=!0,i=n.t0;case 19:n.prev=19,n.prev=20,o||null==u.return||u.return();case 22:if(n.prev=22,!c){n.next=25;break}throw i;case 25:return n.finish(22);case 26:return n.finish(19);case 27:console.log("Done!"),console.log("test",e.length,e),console.log("banks",t.length,t),n.next=35;break;case 32:n.prev=32,n.t1=n.catch(0),console.log("err",n.t1);case 35:case"end":return n.stop()}},n,null,[[0,32],[4,15,19,27],[20,,22,26]])}))).apply(this,arguments)},e=[],function(n){return r.apply(this,arguments)}(t);case 4:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}(),Gn=function(){var n=c()(a.a.mark(function n(t,e){var r,o,c,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Bn.a.get("https://cxrate.com/en/banks/".concat(hn.getCurrency().toLowerCase(),"/").concat(g()(new Date).format("YYYY-MM-DD")));case 3:return r=n.sent,o=r.data.match(/(<table[^>]*>(?:.|\n)*?<\/table>)/)[1],c=new wn.a(o),(t=c.results[0]).forEach(function(n){return Object.keys(n).forEach(function(t){return"Bank"!==t&&(n[t]=n[t].match(/([0-9]*[.])?[0-9]+/)[0])})}),i=t,n.next=9,Yn(i);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}var t},n,null,[[0,11]])}));return function(t,e){return n.apply(this,arguments)}}(),Hn=function(){var n=c()(a.a.mark(function n(t,e,r){var o,c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(""===hn.getLocation().latitude||""===hn.getLocation.longitude)&&hn.setLocation(t),n.next=5,Bn.a.get("https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=".concat(t.latitude,",").concat(t.longitude,"&radius=2000&key=").concat(process.env.GOOGLE_PLACES_API_KEY));case 5:o=n.sent,c=o.data.results[0].name,!gn.isEmpty(c)&&hn.setCity(c),On(Y,c,e,r),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),hn.emit("changeContext",bn.getCurrentCtx(tn)),e(K(),hn.getContext().keyboard);case 15:case"end":return n.stop()}},n,null,[[0,11]])}));return function(t,e,r){return n.apply(this,arguments)}}(),Fn=new Map;Fn.set(en,function(n,t,e){return Pn(t,e)}),Fn.set(tn,function(n,t){return Kn(n,t)}),Fn.set(H,function(n,t,e){return In(n,t,e)}),Fn.set(J,function(n,t,e){return _n(n,t,e)}),Fn.set(F,function(n,t,e){return Ln(n,t,e)}),Fn.set(W,function(n,t,e){return Nn(n,t,e)}),Fn.set(z,function(n,t,e){return Un(n,t,e)}),Fn.set(Q,function(n,t,e){return Sn(t,e)}),Fn.set(nn,function(n,t,e){return Dn(t,e)}),Fn.set(j,function(n,t,e){return Hn(n,t,e)}),Fn.set(G,function(n,t,e){return Gn(t,e)}),f.a.config();var zn=process.env.APP_PORT,Wn=new u.a(process.env.BOT_ACCOUNT_TOKEN),Jn=function(){return p.a.keyboard.apply(p.a,arguments).oneTime().resize().extra()};try{Wn.telegram.setWebhook(process.env.EXPOSE_URL),Wn.startWebhook("/",null,zn)}catch(n){console.log(n),Wn.telegram.deleteWebhook()}Wn.start(function(){var n=c()(a.a.mark(function n(t){var e;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{e=function(){return t.reply.apply(t,arguments)},Fn.has(tn)&&Fn.get(tn)(e,Jn)}catch(n){console.log(n)}case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()),Wn.hears("test",function(){var n=c()(a.a.mark(function n(t){var e,r,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Bn.a.get("https://cxrate.com/en/banks/usd/".concat(g()(new Date).format("YYYY-MM-DD")));case 2:e=n.sent,r=e.data.match(/(<table[^>]*>(?:.|\n)*?<\/table>)/)[1],o=new wn.a(r),(t=o.results[0]).forEach(function(n){return Object.keys(n).forEach(function(t){return"Bank"!==t&&(n[t]=n[t].match(/([0-9]*[.])?[0-9]+/)[0])})}),t;case 6:case"end":return n.stop()}var t},n)}));return function(t){return n.apply(this,arguments)}}()),Wn.on("location",function(){var n=c()(a.a.mark(function n(t){var e,r,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=function(){return t.reply.apply(t,arguments)},r=t.message,o=r.location,r.from,Fn.has(j)&&Fn.get(j)(o,e,Jn);case 3:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()),Wn.on("message",function(){var n=c()(a.a.mark(function n(t){var e,r,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=function(){return t.reply.apply(t,arguments)},r=t&&t.message,o=r.text,Fn.has(o)?Fn.get(o)(o,e,Jn):gn.isCurrency(o)?Fn.has(F)&&Fn.get(F)(o,e,Jn):gn.isBuyOrSell(o)&&Fn.has(W)&&Fn.get(W)(o,e,Jn);case 3:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()),Wn.catch(function(n){return console.log(n)}),Wn.launch()}]);